[gd_scene load_steps=2 format=3 uid="uid://4wt37gjrt0xm"]

[sub_resource type="GDScript" id="GDScript_4fwlb"]
script/source = "lass_name FromHandPrompt
extends Node2D

signal choices(cards: Array[Card])

var minPicks: int
var maxPicks: int
var requireConfirm: bool:
	set(value):
		requireConfirm = value
		$Button.visible = value
var hand: Hand:
	set(value):
		hand = value
		for card in hand.get_cards():
			card.clicked.connect(update_selection.bind(card))

var selection: Array[Card] = []

func _on_button_pressed() -> void:
	if (selection.size() <= maxPicks and selection.size() >= minPicks):
		choices.emit(selection)

func update_selection(card: Card):
	if selection.has(card):
		selection.erase(card)
	else:
		selection.push_back(card)
	
	if !requireConfirm and selection.size() >= minPicks and selection.size() <= maxPicks:
		choices.emit(selection)
"

[node name="PickCards" type="Node2D"]
script = SubResource("GDScript_4fwlb")

[node name="Button" type="Button" parent="."]
offset_right = 8.0
offset_bottom = 8.0
text = "Confirm"

[connection signal="pressed" from="Button" to="." method="_on_button_pressed"]
