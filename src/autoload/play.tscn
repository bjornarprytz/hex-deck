[gd_scene load_steps=6 format=3 uid="uid://casjmgmq015ai"]

[ext_resource type="Script" path="res://autoload/play.gd" id="1_hoqfa"]
[ext_resource type="Script" path="res://addons/godot_state_charts/state_chart.gd" id="2_hxa1c"]
[ext_resource type="Script" path="res://addons/godot_state_charts/compound_state.gd" id="3_b7q5p"]
[ext_resource type="Script" path="res://addons/godot_state_charts/atomic_state.gd" id="4_qgxn4"]
[ext_resource type="Script" path="res://addons/godot_state_charts/transition.gd" id="5_e1gsp"]

[node name="Play" type="Node"]
script = ExtResource("1_hoqfa")

[node name="State" type="Node" parent="."]
script = ExtResource("2_hxa1c")

[node name="Root" type="Node" parent="State"]
script = ExtResource("3_b7q5p")
initial_state = NodePath("Upkeep")

[node name="Upkeep" type="Node" parent="State/Root"]
script = ExtResource("4_qgxn4")

[node name="ToMain" type="Node" parent="State/Root/Upkeep"]
script = ExtResource("5_e1gsp")
to = NodePath("../../Main")
event = &"next phase"

[node name="Main" type="Node" parent="State/Root"]
script = ExtResource("3_b7q5p")
initial_state = NodePath("Idle")

[node name="Idle" type="Node" parent="State/Root/Main"]
script = ExtResource("4_qgxn4")

[node name="ToPlayCard" type="Node" parent="State/Root/Main/Idle"]
script = ExtResource("5_e1gsp")
to = NodePath("../../PlayCard")
event = &"play"

[node name="ToCleanUp" type="Node" parent="State/Root/Main/Idle"]
script = ExtResource("5_e1gsp")
to = NodePath("../../../CleanUp")
event = &"next phase"

[node name="PlayCard" type="Node" parent="State/Root/Main"]
script = ExtResource("4_qgxn4")

[node name="ToIdle" type="Node" parent="State/Root/Main/PlayCard"]
script = ExtResource("5_e1gsp")
to = NodePath("..")
event = &"cancel"

[node name="ResolveCard" type="Node" parent="State/Root/Main"]
script = ExtResource("4_qgxn4")

[node name="ToIdle" type="Node" parent="State/Root/Main/ResolveCard"]
script = ExtResource("5_e1gsp")
to = NodePath("..")
event = &"resolved"

[node name="CleanUp" type="Node" parent="State/Root"]
script = ExtResource("4_qgxn4")

[node name="ToUpkeep" type="Node" parent="State/Root/CleanUp"]
script = ExtResource("5_e1gsp")
to = NodePath("../../Upkeep")
event = &"next phase"

[node name="GameOver" type="Node" parent="State/Root"]
script = ExtResource("4_qgxn4")

[node name="ToGameOver" type="Node" parent="State/Root"]
script = ExtResource("5_e1gsp")
to = NodePath("../GameOver")
event = &"game over"

[connection signal="state_entered" from="State/Root/Upkeep" to="." method="_on_upkeep"]
[connection signal="state_entered" from="State/Root/Main/Idle" to="." method="_on_idle"]
[connection signal="state_physics_processing" from="State/Root/Main/Idle" to="." method="_idle_physics_processing"]
[connection signal="state_entered" from="State/Root/Main/PlayCard" to="." method="_on_play_card"]
[connection signal="state_physics_processing" from="State/Root/Main/PlayCard" to="." method="_play_card_physics_processing"]
[connection signal="state_entered" from="State/Root/Main/ResolveCard" to="." method="_on_resolve_card"]
[connection signal="state_entered" from="State/Root/CleanUp" to="." method="_on_clean_up"]
[connection signal="state_physics_processing" from="State/Root/CleanUp" to="." method="_clean_up_physics_processing"]
[connection signal="state_entered" from="State/Root/GameOver" to="." method="_on_game_over"]
